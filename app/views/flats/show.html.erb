<div class='container mb-5'>
  <div class='row'>
    <div class='py-5'>
      <%= cl_image_tag @flat.image.key, height: 400, class: 'object-fit-cover w-100 rounded-4' %>
    </div>
  </div>

  <div class="row">
    <div class='col-12 col-md-8'>
      <h1 class='text-left'><%= @flat.name %></h1>
      <p><%= @flat.description %></p>
      <p><strong>Price:</strong> $<%= @flat.price %> per night</p>
    </div>
    <div class='col-12 col-md-4'>
      <div class='p-4 rounded-2 bg-white shadow'>
        <%= simple_form_for([@flat, Booking.new], html: {
          data: {
            controller: 'flatpickr'
          }
        }) do |f| %>
          <%= f.input :start_date, as: :string, input_html: { data: { flatpickr_target: 'startDateInput' } } %>
          <%= f.input :end_date, as: :string, input_html: { data: { flatpickr_target: 'endDateInput' } } %>
          <%= f.submit "Book now", class: 'btn btn-success' %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row my-5">
    <div data-controller='map' data-map-markers-value="<%= @markers.to_json %>" data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>" style="height: 400px; width: 100%"></div>
  </div>
</div>
